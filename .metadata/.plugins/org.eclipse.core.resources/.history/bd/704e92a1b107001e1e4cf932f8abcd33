package week6;

import java.util.*;

public class WAR {

    public static void main(String[] args) {

        // Create a deck of cards
        List<Card> deck = new ArrayList<>();
        for (int i = 2; i <= 14; i++) {
            deck.add(new Card(Suit.SPADES, i));
            deck.add(new Card(Suit.HEARTS, i));
            deck.add(new Card(Suit.DIAMONDS, i));
            deck.add(new Card(Suit.CLUBS, i));
        }
        Collections.shuffle(deck);

        // Create two players
        Player player1 = new Player("Player 1");
        Player player2 = new Player("Player 2");

        // Deal the cards to the players
        for (int i = 0; i < deck.size(); i++) {
            if (i % 2 == 0) {
                player1.addCard(deck.get(i));
            } else {
                player2.addCard(deck.get(i));
            }
        }

        // Start the game
        while (!player1.isOut() && !player2.isOut()) {

            // Play a round of War
            Card player1Card = player1.playCard();
            Card player2Card = player2.playCard();

            // Determine the winner of the round
            if (player1Card.getRank() > player2Card.getRank()) {
                player1.addCard(player1Card);
                player1.addCard(player2Card);
            } else if (player2Card.getRank() > player1Card.getRank()) {
                player2.addCard(player1Card);
                player2.addCard(player2Card);
            } else {
                // War!
                for (int i = 0; i < 3; i++) {
                    player1.addCard(deck.remove(0));
                    player2.addCard(deck.remove(0));
                }

                // Determine the winner of the War
                Card warCard1 = player1.playCard();
                Card warCard2 = player2.playCard();
                if (warCard1.getRank() > warCard2.getRank()) {
                    player1.addCard(warCard1);
                    player1.addCard(warCard2);
                } else {
                    player2.addCard(warCard1);
                    player2.addCard(warCard2);
                }
            }
        }

        // Announce the winner of the game
        if (player1.isOut()) {
            System.out.println("Player 2 wins!");
        } else {
            System.out.println("Player 1 wins!");
        }
    }
}
